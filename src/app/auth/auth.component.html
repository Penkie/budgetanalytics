<div class="box">
    <div class="heading">
        <div class="emoji">
            <img width="30" height="30" src="assets/icons/waving.png" alt="waving">
        </div>
        <div class="text">
            <span class="title">Welcome to your budget !</span>
            <span class="sub-title">Please sign in to your account</span>
        </div>
    </div>
    <div class="seperation">
        <div class="bar"></div>
        <div class="text">{{ authMode === 'signin' ? 'Log In' : 'Sign Up' }}</div>
        <div class="bar"></div>
    </div>
    @if (registerSuccess) {
        <alert class="success-alert" type="success" message="Account created successfully" />
    }
    @if (authMode === 'signin') {
        <form [formGroup]="loginForm" (submit)="submitLogin()" class="auth-form">
            <div class="input-group">
                <label for="email">E-mail</label>
                <input class="input-base" formControlName="email" [class.input-error]="submitted && loginForm.controls.email.invalid" placeholder="hello@youremail.com" type="email" name="email">
                @if (submitted && loginForm.controls.email.invalid) {
                    <div class="error-message">
                        E-mail is not valid
                    </div>
                }
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input class="input-base" formControlName="password" [class.input-error]="submitted && loginForm.controls.password.invalid" type="password" name="password" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
                @if (submitted && loginForm.controls.password.invalid) {
                    <div class="error-message">
                        Password must be filled
                    </div>
                }
            </div>
            <button type="submit">Sign In</button>
            @if (errorOnLogin) {
                <alert message="Incorrect email or password" type="error" />
            }
        </form>
        <span class="account">Don't have an account yet ? <span class="change-mode" (click)="authMode = 'signup'">Register here</span></span>
    } @else if (authMode === 'signup') {
        <form [formGroup]="registerForm" (submit)="submitRegister()" class="auth-form">
            <div class="input-group">
                <label for="email">E-mail</label>
                <input class="input-base" formControlName="email" [class.input-error]="submitted && registerForm.controls.email.invalid" placeholder="hello@youremail.com" type="email" name="email">
                @if (submitted && registerForm.controls.email.invalid) {
                    <div class="error-message">
                        E-mail is not valid
                    </div>
                }
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input class="input-base" formControlName="password" [class.input-error]="submitted && registerForm.controls.password.invalid" type="password" name="password" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
                @if (submitted && registerForm.controls.password.invalid) {
                    <div class="error-message">
                        Password must be filled and be at least 8 characters long
                    </div>
                }
            </div>
            <div class="input-group">
                <label for="password">Repeat password</label>
                <input class="input-base" formControlName="repeatPassword" [class.input-error]="submitted && registerForm.controls.repeatPassword.invalid" type="password" name="repeatPassword" placeholder="&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;&#9679;">
                @if (submitted && registerForm.controls.password.invalid) {
                    <div class="error-message">
                        Repeated password must be filled
                    </div>
                }
            </div>
            <button type="submit">Sign Up</button>
            @if (errorOnRegister) {
                <alert message="{{ errorOnRegister }}" type="error" />
            }
        </form>
        <span class="account">Already have an account ? <span class="change-mode" (click)="authMode = 'signin'; submitted = false">Login here</span></span>
    }
    <div class="seperation">
        <div class="bar"></div>
        <div class="text">or</div>
        <div class="bar"></div>
    </div>
    <div class="socials">
        <button class="social-btn" (click)="login('google')">
            <img width="15" height="15" src="assets/icons/google_icon.png" alt="google">
            Continue with Google
        </button>
    </div>
</div>