<div class="top-bar">
    <div class="filter">
        {{ month }} 2024
    </div>
    <div class="profile">
        <button class="profile-btn">
            <img width="50px" height="50px" src="assets/default_pp.png" alt="pp">
        </button>
        <!-- @if (toggleProfileMenu) { -->
            <div class="menu" role="menu">
                <ul>
                    <li>Settings</li>
                    <li (click)="logout()">Log out</li>
                </ul>
            </div>
        <!-- } -->
    </div>
</div>
<div class="grid">
    <div class="last-transactions-box box">
        <div class="heading">
            <span class="title">Transactions</span>
        </div>
        <div class="last-transactions">
            @for (transaction of transactions; track $index) {
            <div class="wrapper">
                <div class="transaction">
                    <div class="info-and-img">
                        <div
                            class="icon"
                            [ngStyle]="{
                                'background-color': transaction.category.color
                            }"
                        >
                            {{ transaction.category.icon }}
                        </div>
                        <div class="what">
                            <span class="description">{{
                                transaction.description
                            }}</span>
                            <span class="type-name">{{
                                transaction.category.name
                            }}</span>
                        </div>
                    </div>
                    <div class="amount-and-date">
                        <div
                            [ngClass]="{
                                red: transaction.amount < 0,
                                green: transaction.amount > 0
                            }"
                            class="amount"
                        >
                            {{ transaction.amount }} {{ currency }}
                        </div>
                        <div class="date">{{ transaction.date | date }}</div>
                    </div>
                </div>
            </div>
            @if ($index != transactions.length - 1) {
            <div class="seperation"></div>
            } }
        </div>
    </div>
    <div class="analytics-box box">
        <div class="heading">
            <span class="title">Spending analytics</span>
        </div>
        <div echarts [options]="optionPieChart"></div>
    </div>
    <div class="total-spent box">
        <div class="heading">
            <span class="title">Summary</span>
        </div>
        <div class="container">
            <div class="title">
                You spent <span class="red">{{ totalSpent }} CHF</span> and received
                <span class="green">{{ totalRevenue }} CHF</span>, making it a total of
                <span [ngClass]="totalRevenue + totalSpent < 0 ? 'red' : 'green'">{{ round(totalRevenue + totalSpent) }} CHF</span>
            </div>
        </div>
        <div echarts [options]="optionBarChart"></div>
    </div>
    <!-- <div class="categories-box box">
        <div class="heading">
            <span class="title">Categories</span>
        </div>
    </div> -->
</div>
