<div class="heading">
    <span class="title">{{ editionMode ? 'Edit a category' : 'Create a new category' }}</span>
</div>
<div class="manage-box">
    <div class="preview">
        <div
            [ngStyle]="{
                'background-color': selectedColor,
                color: pickTextColorBasedOnBgColor(selectedColor)
            }"
            class="category"
        >
            <div class="icon">{{ selectedIcon }}</div>
            <div class="name">{{ nameModel ? nameModel : '\<new category>' }}</div>
        </div>
    </div>
    <form (submit)="editionMode ? editCategory() : createCategory()" class="category-form">
        <div class="name">
            <label for="name">Name</label>
            <input autofocus [(ngModel)]="nameModel" type="text" name="name" id="name" />
        </div>
        <div class="colors-container">
            <label>Color</label>
            <div class="colors">
                @for (color of availableColors; track $index) {
                <div
                    (click)="this.selectedColor = color"
                    [ngClass]="color === selectedColor ? 'selected-color' : ''"
                    [ngStyle]="{ 'background-color': color }"
                    class="color"
                ></div>
                }
            </div>
        </div>
        <div class="icons-container">
            <label>Icon</label>
            <div class="icons">
                @for (icon of availableIcons; track $index) {
                <div
                    (click)="this.selectedIcon = icon"
                    [ngClass]="icon === selectedIcon ? 'selected-icon' : ''"
                    class="icon"
                >
                    {{ icon }}
                </div>
                }
            </div>
        </div>
        <div class="actions">
            <button type="submit" class="submit">
                Save
            </button>
            @if (editionMode) {
                <button (click)="deleteCategory()" class="delete">
                    <img width="20" src="assets/icons/delete.svg" alt="delete">
                    Delete
                </button>
            }
        </div>
        @if (sendError) {
            <alert [message]="sendError" [type]="'error'"></alert>
        }
    </form>
</div>
